{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\n// our-domain.com/\nimport { MongoClient } from \"mongodb\"; // import Layout from \"../components/layout/Layout\";\n\nimport MeetupList from \"../components/meetups/MeetupList\"; // const DUMMY_MEETUPS = [\n//   {\n//     id: \"m1\",\n//     title: \"A First Meetup\",\n//     image:\n//       \"https://upload.wikimedia.org/wikipedia/commons/d/d3/Stadtbild_M%C3%BCnchen.jpg\",\n//     address: \"Some address, 12345 Some City\",\n//     description: \"This is A First Meetup!\",\n//   },\n//   {\n//     id: \"m2\",\n//     title: \"A Second Meetup\",\n//     image:\n//       \"https://upload.wikimedia.org/wikipedia/commons/8/84/Holy_SURP_Hovhannes_Church.jpg\",\n//     address: \"Some address, 12345 Some City\",\n//     description: \"This is A Second Meetup!\",\n//   },\n//   {\n//     id: \"m3\",\n//     title: \"A Third Meetup\",\n//     image:\n//       \"https://upload.wikimedia.org/wikipedia/commons/7/7e/16-03-30-Klagemauer_Jerusalem_RalfR-DSCF7689.jpg\",\n//     address: \"Some address, 12345 Some City\",\n//     description: \"This is A Third Meetup!\",\n//   },\n// ];\n\nfunction HomePage(props) {\n  //static generation cs server side rendering\n  return /*#__PURE__*/_jsx(MeetupList, {\n    meetups: props.meetups\n  }); //request and fetch data only loads on first cycle and initial items (TODO Enhhance SEO Page PreRendering )\n} // //generates on every incoming request\n// //this can be bad because we need to wait on an individual request for it to work ;(\n//   // ssg with static props is faster and we can utilize caching\n// export async function getServerSideProps(context) {\n//   const req = context.req;\n//   const res = context.res;\n//   //Fetch data from an API(no need for revalidate property)\n//   return {\n//     props: {\n//       meetups: DUMMY_MEETUPS,\n//     }\n//   }\n// }\n//calls this function before it calls the component() and we pass the required data here\n\n\nexport async function getStaticProps() {\n  //Fetch Data from an API\n  const client = await MongoClient.connect(`mongodb+srv://12345:12345@cluster0.dizvn9k.mongodb.net/meetups?retryWrites=true&w=majority`);\n  const db = client.db(); //nosql collections are kind of like sql tables but are documents with JSON data\n\n  const meetupsCollection = db.collection(\"meetups\"); //find finds all the documents in that collection and to array formats all the data into an array\n\n  const meetups = await meetupsCollection.find().toArray();\n  client.close(); //move data fetching away from the client and to the server through props and this returned props:{}\n  //revalidate unlocks Incremental Static Generation: Generates during the build process\n  //then regenerates/pushes a new page as indicated 1 seconds after each render cycle.\n\n  return {\n    props: {\n      meetups: meetups.map(meetup => ({\n        title: meetup.title,\n        address: meetup.address,\n        image: meetup.image,\n        id: meetup._id.toString()\n      }))\n    },\n    revalidate: 1\n  };\n}\nexport default HomePage;","map":null,"metadata":{},"sourceType":"module"}